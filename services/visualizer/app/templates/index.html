<!DOCTYPE html>
<html>
<head>
    <title>{{ title }}</title>
</head>
<body>
    <h1>{{ title }}</h1>
    <p>Welcome to the StreamForge Visualizer!</p>
    <p>This is a placeholder for the UI. WebSocket data will appear here.</p>
    <div id="websocket-output"></div>

    <script>
        const websocketOutput = document.getElementById('websocket-output');
        const kafkaTopic = 'visualizer-topic'; // Default topic, replace with dynamic selection
        const ws = new WebSocket(`ws://localhost:8000/ws/topic/${kafkaTopic}`);

        ws.onopen = (event) => {
            websocketOutput.innerHTML += '<p>Connected to WebSocket.</p>';
        };

        ws.onmessage = (event) => {
            websocketOutput.innerHTML += `<p>${event.data}</p>`;
        };

        ws.onclose = (event) => {
            websocketOutput.innerHTML += '<p>Disconnected from WebSocket.</p>';
        };

        ws.onerror = (event) => {
            websocketOutput.innerHTML += '<p>WebSocket error!</p>';
        };
    </script>
</body>
</html>